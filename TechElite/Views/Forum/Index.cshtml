@model ForumViewModel
@{
    ViewData["Title"] = "Forum";
}
<head>
    <link rel="stylesheet" href="~/css/forum.css" asp-append-version="true" />
</head>

<main>
    <div class="forum-container">
        <article class="forum-menu">
            <img class="notifications" src="~/img/Icons/notifications.svg" onclick="showNotifications()">
            <img src="~/img/Icons/search_black.svg">
            <button class="btn" onclick="showForm()">Skapa tråd</button>
        </article>
        <article id="notification-article">
            <section>
                <h4>Notiser</h4>
                <div>
                    <p>Nytt inlägg i din tråd: <a class="notification-link" href="#">Varför går alltid min laddare sönder?</a></p>
                    <p>Nytt inlägg i din tråd: <a class="notification-link" href="#">Söker tips på hållbar laddare till Iphone 13</a></p>
                    <p>Nytt inlägg i din tråd: <a class="notification-link" href="#">Bästa köpet jag gjort!</a></p>
                </div>
            </section>
        </article>
        <article>
            <form method="post" id="create-thread" asp-action="AddThread">
                <h2>Skapa tråd</h2>
                <label for="ForumCategoryId">Kategori</label>
                <select name="ForumCategoryId" id="thread-category" required>
                    <option value="">Välj kategori</option>
                    @foreach (var category in Model.ForumCategories)
                    {
                        <option value="@category.CategoryId">@category.CategoryName</option>
                    }
                </select>
                <label for="ThreadTitle">Titel</label>
                <input type="text" id="title" name="ThreadTitle" minlength="3" maxlength="30" required>
                <label for="ThreadContent">Text</label>
                <textarea id="text" name="ThreadContent" rows="5" columns="50"></textarea>
                <input type="submit" class="btn" id="submit" value="Publicera">
            </form>
        </article>
        <article>
            <section>
                <h4>Senaste</h4>
                <div>
                    @foreach (var forumThread in Model.ForumThreads)
                    {
                        <a class="new-thread" asp-controller="Forum" asp-action="Thread">@forumThread.ThreadTitle</a>
                    }
                    <a class="show-more" asp-controller="Forum" asp-action="LatestThreads">Visa mer</a>
                </div>
            </section>
            <section>
                <h4>Mina trådar</h4>
                <div>
                    @foreach (var myThread in Model.ForumThreads)
                    {
                        if (myThread is null)//Inte inloggad
                        {
                            <a class="my-thread" asp-controller="Forum" asp-action="Thread">Söker tips på hållbar laddare till Iphone 13</a>
                            <a class="my-thread" asp-controller="Forum" asp-action="Thread">Bästa köpet jag gjort!</a>
                            <a class="my-thread" asp-controller="Forum" asp-action="Thread">Varför går alltid min laddare sönder?</a>
                        }
                        else //Inloggad
                        {
                            <a class="my-thread" asp-controller="Forum" asp-action="Thread">@myThread.ThreadTitle</a>
                        }
                    }

                    <a class="show-more" asp-controller="Forum" asp-action="MyThreads">Visa mer</a>
                </div>
            </section>
        </article>
    </div>
</main>
<script>
    function showNotifications() {
        var notis = document.getElementById("notification-article");
        if (notis.style.display == "flex") notis.style.display = "none";
        else notis.style.display = "flex";
    }
    function showForm() {
        var create = document.getElementById("create-thread");
        if (create.style.display == "flex") create.style.display = "none";
        else create.style.display = "flex";
    }
</script>